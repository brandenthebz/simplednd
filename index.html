<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <link
      type="text/css"
      rel="stylesheet"
      href="http://unpkg.com/bootstrap/dist/css/bootstrap.min.css"
    />
    <link
      type="text/css"
      rel="stylesheet"
      href="http://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css"
    />
  </head>
  <body>
    <div id="app">
      <div class="container">
        <div class="form-group">
          <label for=""></label>
          <input
            type="text"
            class="form-control"
            name=""
            id=""
            aria-describedby="helpId"
            placeholder=""
            v-model="name"
          />
          <small id="helpId" class="form-text text-muted">Helper Text</small>
          <input type="button" v-on:click="doAttack()" value="Attack!" class="btn btn-danger">
        </div>
        <b-card :title="message">
          <h6 slot="header" class="mb-0">My name is {{ name }}.</h6>
          <h6 slot="header" class="mb-0">I am {{ age }} years old.</h6>
        </b-card>
      </div>
      <!-- New code here -->

      <!-- New code here -->      
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="http://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>
    <script>
      var app = new Vue({
    el: "#app",
    data: {
        message: "About Me!",
        name: "Branden",
        age: "12",
        attributes: {
            strength: 0,
            dexterity: 0,
            constitution: 0,
            intelligence: 0,
            wisdom: 0,
            charisma: 0,
        },
        armorclass: 10,
        heroics: 3,
        attack: 0,
        hitpoints: {
            total: 10,
            current: 0
        },
        weapons: {
            primary: {
                id: 3,
                name: "Sword",
                hitbonus: 0,
                type: "slashing",
                damage: [1, 8],
                weight: 30,
                range: 0
            },
            secondary: {
                id: 4,
                name: "Shortbow",
                hitbonus: 0,
                type: "piercing",
                damage: [1, 8],
                weight: 15,
                range: 25
            }
        },
        armor: {
            id: 4,
            name: "Chainmail",
            acbonus: 3,
            weight: 30
        },
        shield: {
            id: 1,
            name: "Wooden Shield",
            acbonus: 1,
            weight: 10
        }
    },
    computed: {
        armorclasstotal: function() {
            return this.attributes.dexterity + this.armorclass + this.armor.acbonus + this.shield.acbonus
        },
        notice: function() {
            return this.attributes.wisdom + 10;
        },

    },
    methods: {
        doAttack: function() {
            let roll20 = this.rollDice(1, 20)

            if (roll20 === 20) {
                console.log('Natural 20 Bitches!')
            }

            if (roll20 === 1) {
                console.log('Fumbled Roll')
            }

            let roll = roll20 + this.attributes.strength + this.weapons.primary.hitbonus
            console.log("Hit "+roll)

            let damage = this.rollDice(this.weapons.primary.damage[0], this.weapons.primary.damage[1])

            if (roll20 === 20) {
                damage = damage * 2
                console.log('Double Damage!')
            }


            console.log("Damage: " + damage)
        },
        rollDice: function(num, type, advantage = false) {

            $roll1 = Math.floor(Math.random() * (type * num)) + num

            if (advantage !== false) {

                $roll2 = Math.floor(Math.random() * (type * num)) + num

                if (advantage === 'advantage') {
                    if ($roll2 > $roll1) {
                        return $roll2
                    } else {
                        return $roll1
                    }
                } else {
                    if ($roll2 < $roll1) {
                        return $roll2
                    } else {
                        return $roll1
                    }
                }
            }
            return $roll1
        }
    }
});
    </script>
  </body>
</html>
